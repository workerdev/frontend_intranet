extends ../layout
block style_propio
    //link(rel='stylesheet', type='text/css', href='/css/extras/extra.css')
block contenido
    h1(style="color:black; float: right;")=tipo

    h2.color_texto_base=titulo
    each noticia in noticias
        .card.bg-light.mb-4(style='max-width: 18rem;display: inline-flex;margin:5px; cursor:pointer;',onclick="location.href = '/comunicacion/Noticia/"+noticia.id_noticia+"'" )
            .card-body(style="padding: 10px;")
                h5.card-title(style="text-align: justify;")=noticia.titulo_noticia
                .card-image
                    =noticia.contenido_noticia
                p.card-text(style="font-size: 13px;text-align: justify;")=noticia.subtitulo_noticia
                p.card-text(style="float: right;font-size: 11px; font-weight: bold;")=noticia.fecha_noticia

block scripts
    script(type="text/javascript").
        
            var letter = ['Æ', 'Ç', 'È', 'É', 'Ê', 'Ë', 'Ì', 'Í', 'Î', 'Ï', 'Ð', 'Ñ', 'Ò', 'Ó', 'Ô', 'Õ', 'Ö', '×', 'Ø',
                'Ù', 'Ú', 'Û', 'Ü', 'Ý', 'Þ', 'ß', 'à', 'á', 'â', 'ã', 'ä', 'å', 'æ', 'ç', 'è', 'é', 'ê', 'ë',
                'ì', 'í', 'î', 'ï', 'ð', 'ñ', 'ò', 'ó', 'ô', 'õ', 'ö', '÷', 'ø', 'ù', 'ú', 'û', 'ü', 'ý', 'þ',
                'ÿ', '\'', '¡', '¢', '£', '¤', '¥', '¦', '§', '¨', '©', 'ª', '«', '¬', '\'', '®', '¯', '°', '±',
                '²', '³', '´', 'µ', '¶', '·', '¸', '¹', 'º', '»', '¼', '½', '¾', '¿', '€', '‚', 'ƒ', '„', '…',
                '†', '‡', 'ˆ', '‰', 'Š', '‹', 'Œ', 'Ž', '‘', '’', '“', '”', '•', '–', '—', '˜', '™', 'š', '›',
                'œ', 'ž', 'Ÿ', '"', '&', '<', '>']
            var codes = [
                /&AElig;/g, /&Ccedil;/g, /&Egrave;/g, /&Eacute;/g, /&Ecirc;/g, /&Euml;/g, /&Igrave;/g, /&Iacute;/g, /&Icirc;/g, /&Iuml;/g, /&ETH;/g, /&Ntilde;/g, /&Ograve;/g, /&Oacute;/g, /&Ocirc;/g, /&Otilde;/g, /&Ouml;/g, /&times;/g, /&Oslash;/g, /&Ugrave;/g, /&Uacute;/g, /&Ucirc;/g, /&Uuml;/g, /&Yacute;/g, /&THORN;/g, /&szlig;/g, /&agrave;/g, /&aacute;/g, /&acirc;/g, /&atilde;/g, /&auml;/g, /&aring;/g, /&aelig;/g, /&ccedil;/g, /&egrave;/g, /&eacute;/g, /&ecirc;/g, /&euml;/g, /&igrave;/g, /&iacute;/g, /&icirc;/g, /&iuml;/g, /&eth;/g, /&ntilde;/g, /&ograve;/g, /&oacute;/g, /&ocirc;/g, /&otilde;/g, /&ouml;/g, /&divide;/g, /&oslash;/g, /&ugrave;/g, /&uacute;/g, /&ucirc;/g, /&uuml;/g, /&yacute;/g, /&thorn;/g, /&yuml;/g, /&nbsp;/g, /&iexcl;/g, /&cent;/g, /&pound;/g, /&curren;/g, /&yen;/g, /&brvbar;/g, /&sect;/g, /&uml;/g, /&copy;/g, /&ordf;/g, /&laquo;/g, /&not;/g, /&shy;/g, /&reg;/g, /&macr;/g, /&deg;/g, /&plusmn;/g, /&sup2;/g, /&sup3;/g, /&acute;/g, /&micro;/g, /&para;/g, /&middot;/g, /&cedil;/g, /&sup1;/g, /&ordm;/g, /&raquo;/g, /&frac14;/g, /&frac12;/g, /&frac34;/g, /&iquest;/g, /&euro;/g, /&sbquo;/g, /&fnof;/g, /&bdquo;/g, /&hellip;/g, /&dagger;/g, /&Dagger;/g, /&circ;/g, /&permil;/g, /&Scaron;/g, /&lsaquo;/g, /&OElig;/g, /&Zcaron;/g, /&lsquo;/g, /&rsquo;/g, /&ldquo;/g, /&rdquo;/g, /&bull;/g, /&ndash;/g, /&mdash;/g, /&tilde;/g, /&trade;/g, /&scaron;/g, /&rsaquo;/g, /&oelig;/g, /&zcaron;/g, /&Yuml;/g, /&quot;/g, /&amp;/g, /&lt;/g, /&gt;/g,
            ]
            var content = document.getElementsByClassName('card-image');
            //console.log(content.length);
            for(var i = 0; i < content.length ; i++) {
                var contenido = content[i].innerHTML;
                var replace;
                for (var j = 0; j < codes.length; j++) {
                    replace = contenido.replace(codes[j], letter[j]);
                    contenido = replace;
                }
                //console.log(i)
                //console.log(contenido);
                var encontrado = replace.match(/<img\s[^>]*?src\s*=\s*['\"]([^'\"]*?)['\"][^>]*?>/);
                try {
                    content[i].innerHTML = encontrado[0];
                    var imagenes = $('.card-image img');

                    for (var h = 0; h < imagenes.length; h++) {
                        imagenes[h].setAttribute('style', 'height: 90%; width: 90%;')
                    }
                }catch (e) {
                    content[i].innerHTML = "";
                }


            }
        
